<div class="container-fluid">
  <form [formGroup]="comunicazioneForm">
    <div class="row">
      <div class="col-md-4">
        <app-select-field [label]="'COMMUNICATIONS.COMMUNICATION_TYPE' | translate" [id]="'descrizione'"
          [name]="'descrizione'" formControlName="descrizione" [options]="metadata.tipoComunicazione"><!-- [pdropdown]="true" -->
        </app-select-field>
      </div>
    </div>
    <!-- <div class="row">
      <div class="col-md-4">
        <app-text-field
          [label]="'SUPERINTENDENT_OPINION_TAB.COMUNICATION_MODAL.A' | translate | uppercase"
          [id]="'a'"
          [name]="'a'"
          formControlName="a"
        ></app-text-field>
      </div>
    </div> -->
    <div class="row">
      <div class="col-md-4">
        <ng-container formArrayName="aggiungiDestinario" *ngFor="
            let destinatario of comunicazioneForm.get('aggiungiDestinario')['controls'];
            let i = index
          ">
          <ng-container [formGroupName]="i">
            <app-text-field
              [label]="'SUPERINTENDENT_OPINION_TAB.COMUNICATION_MODAL.OTHER_RECEPIENT' | translate | uppercase"
              [id]="'recepient'" [name]="'recepient'" formControlName="recepient"></app-text-field>
          </ng-container>
        </ng-container>
      </div>
    </div>
    <div class="row">
      <div class="col-md-4">
        <button type="button" class="bttn btn btn-primary" (click)="addAggiungiDestinario()">
          {{'BUTTONS.ADD'|translate|uppercase}}
          <fa-icon icon="plus"></fa-icon>
        </button>
      </div>
    </div>
    <div class="row mt-3">
      <div class="col-md-4">
        <app-text-field [label]="'&nbsp;'" [id]="'codiceFascicolo'" [name]="'codiceFascicolo'"
          formControlName="codiceFascicolo"></app-text-field>
      </div>
      <div class="col-md-4">
        <app-text-field [label]="'SUPERINTENDENT_OPINION_TAB.COMUNICATION_MODAL.SUBJECT' | translate | uppercase"
          [id]="'oggetto'" [name]="'oggetto'" formControlName="oggetto"></app-text-field>
      </div>
    </div>
    <div class="row">
      <div class="col">
        <app-textarea-field [label]="'COMMUNICATIONS.TEXT' | translate | uppercase" [id]="'testoTemplate'"
          [name]="'testoTemplate'" formControlName="testoTemplate"></app-textarea-field>
      </div>
    </div>

    <div class="row">
      <div class="col-md-12">
        <div class="form-group">
          <label for="allega-file" class="mt-3 font-weight-bold">{{
            'ADMINISTRATIVE_DOCUMETATION_TAB.UPLOAD_FILE_LABEL' | translate | uppercase
          }}</label>
          <div class="file-upload-box">
            <p-fileUpload id="allega-file" mode="basic" name="myfile" customUpload="true" accept=".pdf,.rar,.zip"
              [auto]="true" [chooseLabel]="'BUTTONS.CHOOSE' | translate" (onSelect)="upload($event)"></p-fileUpload>
            <div>
              {{ comunicazioneForm.get('allegati').value }}
            </div>
          </div>


        </div>
      </div>
    </div>

    <div class="row clearfix mt-3">
      <div class="col-md-12 text-center mt-3 mb-1">
        <button type="button" class="bttn btn btn-primary" (click)="addCommunication()">
          {{'BUTTONS.SAVE_DRAFT'|translate|titlecase}}
          <fa-icon icon="save"></fa-icon>
        </button>
        <button type="button" class="bttn btn btn-primary" (click)="addInvia()">
          {{'BUTTONS.SEND_MAIL'|translate|titlecase}}
          <fa-icon icon="paper-plane"></fa-icon>
        </button>
      </div>
    </div>

  </form>
</div>